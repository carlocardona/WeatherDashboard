<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css" />
    <title>Weather Dashboard</title>
</head>

<body>

    <div class="container">

        <div class="span">
            <h1 class="jumbotron">Weather Dashboard</h1>
        </div>

        <div class="row" id="mainBody">

            <div class="col-md-4 card-body" id="leftSide">

                <div id="searchArea">
                    <div class="row">
                        <h4>Search For City</h4>
                    </div>

                    <div class="row">
                        <input placeholder="City" id="cityInput"></input>

                        <button type="button" class="btn btn-info" id="searchButton">
                            <span class="glyphicon glyphicon-search"></span> Search
                        </button>

                    </div>

                    <div class="row">
                        <div class="resultsArea">
                            <h4>Results Area</h4>
                            <ul>
                                <li>City 1</li>
                            </ul>
                        </div>

                    </div>

                </div>
            </div>

            <div class="col-md-8" id="rightSide">

                <div class="row" id="cityDate">
                    <div id="cityName"></div>
                    <div id="currentDate"></div>
                    <div id="currentIcon"></div>

                </div>

                <div class="row" id="basicInfo">
                    <ul>
                        <li id="temperature"></li>
                        <li id="humidity"></li>
                        <li id="windSpeed"></li>
                        <li id="uvIndex"></li>
                    </ul>
                </div>

                <div class="row" id="fiveDayForecast">

                    <div id="dayOne">
                        <div>Date</div>
                        <div>Weather Icon</div>
                        <div>Temperature</div>
                        <div>Humidity</div>
                    </div>
                    <div id="dayTwo">
                        <div>Date</div>
                        <div>Weather Icon</div>
                        <div>Temperature</div>
                        <div>Humidity</div>
                    </div>
                    <div id="dayThree">
                        <div>Date</div>
                        <div>Weather Icon</div>
                        <div>Temperature</div>
                        <div>Humidity</div>
                    </div>
                    <div id="dayFour">
                        <div>Date</div>
                        <div>Weather Icon</div>
                        <div>Temperature</div>
                        <div>Humidity</div>
                    </div>
                    <div id="dayFive">
                        <div>Date</div>
                        <div>Weather Icon</div>
                        <div>Temperature</div>
                        <div>Humidity</div>
                    </div>
                </div>

            </div>
        </div>

    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>

        $("#searchButton").on("click", function () {

            const apiKey = "63f13896fa74becbbddd56518f8a530f"
            const cityName = $("#cityInput").val()
            const queryURL = "https://api.openweathermap.org/data/2.5/weather?q=" + cityName +
                "&appid=" + apiKey;

            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function (response) {

                console.log(response);

                $("#cityName").text(response.name);
                $("#currentDate").text(response.dt);
                $("#currentIcon").text(response.icon);
                //temperature needs converting
                $("#temperature").text("Temperature: " + response.main.temp);
                $("#humidity").text("Humidity: " + response.main.humidity);
                $("#windSpeed").text("Wind Speed: " + response.wind.speed)

                //UV Index
                let coordLat = response.coord.lat;
                let coordLon = response.coord.lon;

                const queryUVIndex = "https://api.openweathermap.org/data/2.5/uvi?lat=" + coordLat + "&lon=" + coordLon + "&appid=" + apiKey;

                $.ajax({
                    url: queryUVIndex,
                    method: "GET"
                }).then(function (response) {
                    //needs red background
                    $("#uvIndex").text("UV Index: " + response.value);
                });

                //5 Day Forecast
                let queryFiveForecast = "https://api.openweathermap.org/data/2.5/forecast?q=" + cityName + "&appid=" + apiKey;

                $.ajax({
                    url: queryFiveForecast,
                    method: "GET"
                }).then(function (response) {
                    console.log("Forecast:" + response.forecast);
                })

            });


            //save clicked querys
            //append to a list to the left side
            //when its clicked should call back the search function

        });

    </script>

</body>

</html>